const datalib = require('datalib');
const sample  = require('d3fc-sample');

let dataset = [ 
  { 'Ankle Flex/Ext': '16.545041',
    'Knee Int/Ext R.': '-3.698139' },
  { 'Ankle Flex/Ext': '16.513762',
    'Knee Int/Ext R.': '-3.711363' },
  { 'Ankle Flex/Ext': '16.503336',
    'Knee Int/Ext R.': '-3.724586' },
  { 'Ankle Flex/Ext': '16.49291', 'Knee Int/Ext R.': '-3.744421' },
  { 'Ankle Flex/Ext': '16.49291', 'Knee Int/Ext R.': '-3.77748' },
  { 'Ankle Flex/Ext': '16.49291', 'Knee Int/Ext R.': '-3.810539' },
  { 'Ankle Flex/Ext': '16.49291', 'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '16.49291', 'Knee Int/Ext R.': '-3.870044' },
  { 'Ankle Flex/Ext': '16.503336',
    'Knee Int/Ext R.': '-3.883268' },
  { 'Ankle Flex/Ext': '16.513762',
    'Knee Int/Ext R.': '-3.896491' },
  { 'Ankle Flex/Ext': '16.524189',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.545041',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.565893',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.586745',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.597171',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.607597',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.597171',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.618023',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.670154',
    'Knee Int/Ext R.': '-3.916326' },
  { 'Ankle Flex/Ext': '16.711858',
    'Knee Int/Ext R.': '-3.916326' },
  { 'Ankle Flex/Ext': '16.753562',
    'Knee Int/Ext R.': '-3.903103' },
  { 'Ankle Flex/Ext': '16.805693',
    'Knee Int/Ext R.': '-3.883268' },
  { 'Ankle Flex/Ext': '16.857823',
    'Knee Int/Ext R.': '-3.863433' },
  { 'Ankle Flex/Ext': '16.909953',
    'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '16.962084',
    'Knee Int/Ext R.': '-3.836986' },
  { 'Ankle Flex/Ext': '16.993362',
    'Knee Int/Ext R.': '-3.836986' },
  { 'Ankle Flex/Ext': '17.035066',
    'Knee Int/Ext R.': '-3.836986' },
  { 'Ankle Flex/Ext': '17.076771',
    'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '17.118475',
    'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '17.160179',
    'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '17.21231', 'Knee Int/Ext R.': '-3.836986' },
  { 'Ankle Flex/Ext': '17.26444', 'Knee Int/Ext R.': '-3.823762' },
  { 'Ankle Flex/Ext': '17.316571',
    'Knee Int/Ext R.': '-3.810539' },
  { 'Ankle Flex/Ext': '17.379127',
    'Knee Int/Ext R.': '-3.803927' },
  { 'Ankle Flex/Ext': '17.420831',
    'Knee Int/Ext R.': '-3.797315' },
  { 'Ankle Flex/Ext': '17.441683', 'Knee Int/Ext R.': '-3.77748' },
  { 'Ankle Flex/Ext': '17.45211', 'Knee Int/Ext R.': '-3.764257' },
  { 'Ankle Flex/Ext': '17.462536',
    'Knee Int/Ext R.': '-3.751033' },
  { 'Ankle Flex/Ext': '17.45211', 'Knee Int/Ext R.': '-3.73781' },
  { 'Ankle Flex/Ext': '17.441683',
    'Knee Int/Ext R.': '-3.724586' },
  { 'Ankle Flex/Ext': '17.431257',
    'Knee Int/Ext R.': '-3.711363' },
  { 'Ankle Flex/Ext': '17.420831',
    'Knee Int/Ext R.': '-3.691528' },
  { 'Ankle Flex/Ext': '17.420831',
    'Knee Int/Ext R.': '-3.671692' },
  { 'Ankle Flex/Ext': '17.399979',
    'Knee Int/Ext R.': '-3.651857' },
  { 'Ankle Flex/Ext': '17.379127',
    'Knee Int/Ext R.': '-3.618798' },
  { 'Ankle Flex/Ext': '17.358275',
    'Knee Int/Ext R.': '-3.598963' },
  { 'Ankle Flex/Ext': '17.337423',
    'Knee Int/Ext R.': '-3.572516' },
  { 'Ankle Flex/Ext': '17.295718',
    'Knee Int/Ext R.': '-3.565905' },
  { 'Ankle Flex/Ext': '17.254014',
    'Knee Int/Ext R.': '-3.572516' },
  { 'Ankle Flex/Ext': '17.21231', 'Knee Int/Ext R.': '-3.58574' },
  { 'Ankle Flex/Ext': '17.170605', 'Knee Int/Ext R.': '-3.58574' },
  { 'Ankle Flex/Ext': '17.128901', 'Knee Int/Ext R.': '-3.58574' },
  { 'Ankle Flex/Ext': '17.076771',
    'Knee Int/Ext R.': '-3.592352' },
  { 'Ankle Flex/Ext': '17.045492',
    'Knee Int/Ext R.': '-3.605575' },
  { 'Ankle Flex/Ext': '17.014214',
    'Knee Int/Ext R.': '-3.632022' },
  { 'Ankle Flex/Ext': '16.993362',
    'Knee Int/Ext R.': '-3.658469' },
  { 'Ankle Flex/Ext': '16.97251', 'Knee Int/Ext R.': '-3.684916' },
  { 'Ankle Flex/Ext': '16.951658',
    'Knee Int/Ext R.': '-3.711363' },
  { 'Ankle Flex/Ext': '16.930806', 'Knee Int/Ext R.': '-3.73781' },
  { 'Ankle Flex/Ext': '16.909953',
    'Knee Int/Ext R.': '-3.764257' },
  { 'Ankle Flex/Ext': '16.899527',
    'Knee Int/Ext R.': '-3.790703' },
  { 'Ankle Flex/Ext': '16.889101',
    'Knee Int/Ext R.': '-3.823762' },
  { 'Ankle Flex/Ext': '16.878675',
    'Knee Int/Ext R.': '-3.843597' },
  { 'Ankle Flex/Ext': '16.868249',
    'Knee Int/Ext R.': '-3.876656' },
  { 'Ankle Flex/Ext': '16.868249',
    'Knee Int/Ext R.': '-3.896491' },
  { 'Ankle Flex/Ext': '16.868249',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.868249',
    'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.868249',
    'Knee Int/Ext R.': '-3.916326' },
  { 'Ankle Flex/Ext': '16.857823',
    'Knee Int/Ext R.': '-3.922938' },
  { 'Ankle Flex/Ext': '16.857823', 'Knee Int/Ext R.': '-3.92955' },
  { 'Ankle Flex/Ext': '16.847397',
    'Knee Int/Ext R.': '-3.936162' },
  { 'Ankle Flex/Ext': '16.836971',
    'Knee Int/Ext R.': '-3.942773' },
  { 'Ankle Flex/Ext': '16.826545',
    'Knee Int/Ext R.': '-3.949385' },
  { 'Ankle Flex/Ext': '16.816119',
    'Knee Int/Ext R.': '-3.955997' },
  { 'Ankle Flex/Ext': '16.805693',
    'Knee Int/Ext R.': '-3.962608' },
  { 'Ankle Flex/Ext': '16.795267', 'Knee Int/Ext R.': '-3.96922' },
  { 'Ankle Flex/Ext': '16.78484', 'Knee Int/Ext R.': '-3.975832' },
  { 'Ankle Flex/Ext': '16.78484', 'Knee Int/Ext R.': '-3.982444' },
  { 'Ankle Flex/Ext': '16.795267',
    'Knee Int/Ext R.': '-3.995667' },
  { 'Ankle Flex/Ext': '16.805693',
    'Knee Int/Ext R.': '-4.015502' },
  { 'Ankle Flex/Ext': '16.816119',
    'Knee Int/Ext R.': '-4.028726' },
  { 'Ankle Flex/Ext': '16.826545',
    'Knee Int/Ext R.': '-4.035337' },
  { 'Ankle Flex/Ext': '16.836971',
    'Knee Int/Ext R.': '-4.041949' },
  { 'Ankle Flex/Ext': '16.847397',
    'Knee Int/Ext R.': '-4.061784' },
  { 'Ankle Flex/Ext': '16.857823', 'Knee Int/Ext R.': '-4.08162' },
  { 'Ankle Flex/Ext': '16.878675',
    'Knee Int/Ext R.': '-4.101455' },
  { 'Ankle Flex/Ext': '16.889101', 'Knee Int/Ext R.': '-4.12129' },
  { 'Ankle Flex/Ext': '16.899527',
    'Knee Int/Ext R.': '-4.127902' },
  { 'Ankle Flex/Ext': '16.909953',
    'Knee Int/Ext R.': '-4.114678' },
  { 'Ankle Flex/Ext': '16.92038', 'Knee Int/Ext R.': '-4.101455' },
  { 'Ankle Flex/Ext': '16.930806',
    'Knee Int/Ext R.': '-4.088231' },
  { 'Ankle Flex/Ext': '16.941232',
    'Knee Int/Ext R.': '-4.068396' },
  { 'Ankle Flex/Ext': '16.962084',
    'Knee Int/Ext R.': '-4.048561' },
  { 'Ankle Flex/Ext': '16.982936',
    'Knee Int/Ext R.': '-4.028726' },
  { 'Ankle Flex/Ext': '16.982936',
    'Knee Int/Ext R.': '-4.008891' },
  { 'Ankle Flex/Ext': '16.962084',
    'Knee Int/Ext R.': '-3.975832' },
  { 'Ankle Flex/Ext': '16.941232',
    'Knee Int/Ext R.': '-3.942773' },
  { 'Ankle Flex/Ext': '16.92038', 'Knee Int/Ext R.': '-3.909715' },
  { 'Ankle Flex/Ext': '16.899527',
    'Knee Int/Ext R.': '-3.883268' },
  { 'Ankle Flex/Ext': '16.878675',
    'Knee Int/Ext R.': '-3.856821' },
];


// let data = datalib.read(dataset);
// let count = datalib.count.distinct(dataset);
// let unique = datalib.unique(dataset);

const sampler = sample.largestTriangleThreeBucket();

sampler.x(d => d['Ankle Flex/Ext'])
    .y(d => d['Knee Int/Ext R.']);

// Configure the size of the buckets used to downsample the data.
sampler.bucketSize(10);

// Run the sampler
var sampledData = sampler(dataset);

console.log(`Reduced data size from ${dataset.length} to ${sampledData.length}`)
console.log(sampledData);

process.exit(1);